$(function(){
	var flag=0;
	$(window).scroll(function(){
		if($(document).scrollTop()>=50){
			$('#toplogo').show();
		}
		else if($(document).scrollTop()<50){
			$('#toplogo').hide();
		}
	});
	$('#toplogo').click(function(){
		$('body,html').animate({scrollTop:0},150);
	});
	$('.publisher-name').blur(function(){
		if($(this).val()==''){
			$('.name-error-text').show();
		}else{
			$('.name-error-text').hide();
		}
	});
	$('.city').blur(function(){
		if($(this).val()==''||$(this).val()=='请选择城市名'){
			$('.place-error-text').css('diaplay','block');
			
		}else{
			$('.place-error-text').hide();
		}
	});
	$('.publisher-tel').blur(function(){
		if($(this).val()==''){
			$('.tel-error-text').show();
		}else{
			$('.tel-error-text').hide();
		}
	});
	$('.bank-name').blur(function(){
		if($(this).val()==''){
			$('.bank-name-error-text').show();
		}else{
			$('.bank-name-error-text').hide();
		}
	});
	$('.part-bank').blur(function(){
		if($(this).val()==''){
			$('.part-bank-error-text').show();
		}else{
			$('.part-bank-error-text').hide();
		}
	});
	$('.open-name').blur(function(){
		if($(this).val()==''){
			$('.open-name-error-text').show();
		}else{
			$('.open-name-error-text').hide();
		}
	});
	$('.bank-count').blur(function(){
		if($(this).val()==''){
			$('.bank-count-error-text').show();
		}else{
			$('.bank-count-error-text').hide();
		}
	});
	$('.prev-return').click(function(){
		var project_id=$('.project_id').val();
		location.href="product/pubStepTwo_search/"+project_id;
	});
	$('.save-publisher').click(function(){
		if($('.publisher-name').val()==''||$('.publisher-tel').val()==''||$('.bank-name').val()==''||$('.part-bank').val()==''||$('.open-name').val()==''||$('.bank-count').val()==''||$('.city').val()==''||$('.city').val()=='请选择城市名'){
			$('body,html').animate({scrollTop:0},150);
			$('#alert-bg').show();
			$('#alert-box').show();	
		}
		if($('.publisher-name').val()==''){
			$('.name-error-text').show();
		}
		if($('.city').val()==''||$('.city').val()=='请选择城市名'){
			$('.place-error-text').show();
		}
		if($('.publisher-tel').val()==''){
			$('.tel-error-text').show();
		}
		if($('.bank-name').val()==''){
			$('.bank-name-error-text').show();
		}
		if($('.part-bank').val()==''){
			$('.part-bank-error-text').show();
		}
		if($('.open-name').val()==''){
			$('.open-name-error-text').show();
		}
		if($('.bank-count').val()==''){
			$('.bank-count-error-text').show();
		}
		if($('.publisher-name').val()!=''&&$('.publisher-tel').val()!=''&&$('.bank-name').val()!=''&&$('.part-bank').val()!=''&&$('.open-name').val()!=''&&$('.bank-count').val()!=''&&$('.city').val()!=''&&$('.city').val()!='请选择城市名'){
			$.post('publisher/pubStepThreeSave',{
				project_id:$('.project_id').val(),
				pub_name:$('.publisher-name').val(),
				pub_province:$('.province').val(),
				pub_city:$('.city').val(),
				pub_tel:$('.publisher-tel').val(),
				bank_name:$('.bank-name').val(),
				bank_add:$('.part-bank').val(),
				bank_person_name:$('.open-name').val(),
				bank_account:$('.bank-count').val()
			},function(data){
				if(data){
					$('body,html').animate({scrollTop:0},150);
					$('#alert-bg').show();
					$('#alert-box-ok').show();	
					$('#alert-box-ok a').click(function(){
						flag=1;
						location.href="publisher/pubStepThreeShow/"+$('.project_id').val();
						
					});
				}
			},'text');
		}
	});
	$('.alter-publisher').click(function(){
		if($('.publisher-name').val()==''||$('.publisher-tel').val()==''||$('.bank-name').val()==''||$('.part-bank').val()==''||$('.open-name').val()==''||$('.bank-count').val()==''||$('.city').val()==''||$('.city').val()=='请选择城市名'){
			$('body,html').animate({scrollTop:0},150);
			$('#alert-bg').show();
			$('#alert-box').show();	
		}
		if($('.publisher-name').val()==''){
			$('.name-error-text').show();
		}
		if($('.publisher-tel').val()==''){
			$('.tel-error-text').show();
		}
		if($('.bank-name').val()==''){
			$('.bank-name-error-text').show();
		}
		if($('.city').val()==''||$('.city').val()=='请选择城市名'){
			$('.place-error-text').show();
		}
		if($('.part-bank').val()==''){
			$('.part-bank-error-text').show();
		}
		if($('.open-name').val()==''){
			$('.open-name-error-text').show();
		}
		if($('.bank-count').val()==''){
			$('.bank-count-error-text').show();
		}
		if($('.publisher-name').val()!=''&&$('.publisher-tel').val()!=''&&$('.bank-name').val()!=''&&$('.part-bank').val()!=''&&$('.open-name').val()!=''&&$('.bank-count').val()!=''&&$('.city').val()!=''&&$('.city').val()!='请选择城市名'){
			$.post('publisher/pubStepThreeUpdate',{
				publisher_id:$('.publisher_id').val(),
				pub_name:$('.publisher-name').val(),
				pub_province:$('.province').val(),
				pub_city:$('.city').val(),
				pub_tel:$('.publisher-tel').val(),
				bank_name:$('.bank-name').val(),
				bank_add:$('.part-bank').val(),
				bank_person_name:$('.open-name').val(),
				bank_account:$('.bank-count').val()
			},function(data){
				if(data){
					$('body,html').animate({scrollTop:0},150);
					$('#alert-bg').show();
					$('#alert-box-ok').show();	
					$('#alert-box-ok a').click(function(){
						$('#alert-bg').hide();
						$('#alert-box-ok').hide();
						flag=1;
					});
				}
			},'text');
		}
	});
	$('.pub-product').click(function(){
		if(flag==0){
			$('body,html').animate({scrollTop:0},150);
			$('#alert-bg').show();
			$('#alert-box-pub').show();	
			$('#alert-box-pub a').click(function(){
				$('#alert-bg').hide();
				$('#alert-box-pub').hide();
			});
		}else if(flag==1){
			location.href="product/pubSuccess/"+$('.project_id').val();;
		}
	});
	$('#alert-box .alert-title a').click(function(){
		$('#alert-bg').hide();
		$('#alert-box').hide();
	});
	$('#alert-box .alert-sure a').click(function(){
		$('#alert-bg').hide();
		$('#alert-box').hide();
	});
});